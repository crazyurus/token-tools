if(!String.prototype.trim){String.prototype.trim=function(){return $.trim(this)}}var Token={alert:bootbox.alert,ajax:function(c,b,a){$.post(c,b,function(d){if(d.code==200){a(d.data)}else{if(d.data){bootbox.alert(d.data)}}})},check:{url:function(a){return/^[a-zA-z]+:\/\/[^\s]*$/.test(a)},qq:function(a){return/^[1-9][0-9]{4,10}$/.test(a)},weibo:function(a){return/^[0-9]{8,12}$/.test(a)}},detect:{_useragent:navigator.userAgent.toLowerCase(),isIE:function(){return !!window.ActiveXObject||"ActiveXObject" in window},isChrome:function(){return !!window.chrome},isFirefox:function(){return !!window.netscape&&!!window.Iterator},isOpera:function(){return !!window.opera},isSafari:function(){return this._useragent.indexOf("safari")>-1&&this._useragent.indexOf("chrome")<1},isMQQBrowser:function(){return this._useragent.indexOf("mqqbrowser")>-1},isUCBrowser:function(){return this._useragent.indexOf("ucbrowser")>-1},isMobile:function(){return/(ipad|ipod|iphone|ios|android|yunos|windows phone|nokia|symbian|meego|mobile|mobi)/i.test(this._useragent)},getIEVer:function(){var a=this._useragent.match(/(msie) ([\w.]+)/gi);return a?parseFloat(a[0].replace(/(msie) /i,"")):99}},support:{canvas:function(){return document.createElement("canvas").getContext},fileReader:function(){return typeof(FileReader)!=="undefined"}},tools:{getFileType:function(a){return a.split(".").pop().toLowerCase()},getFileName:function(a){return a.replace(/\\/g,"/").split("/").pop().toLowerCase()}},storage:{_storage:window.localStorage,enable:function(){return this._storage!=undefined},set:function(a,b){if(this._storage){this._storage.setItem(a,b)}},get:function(a){var b=undefined;if(this._storage){b=this._storage.getItem(a)}return b},has:function(a){return this.get(a)!=undefined},remove:function(a){if(this._storage){this._storage.removeItem(a)}},clear:function(){this._storage.clear()}},progress:{start:NProgress.start,complete:NProgress.done},message:{alert:bootbox.alert,confirm:bootbox.confirm,prompt:bootbox.prompt,dialog:bootbox.dialog,topbar:function(a,b){if(!Token.storage.has("top_"+a)){$(".alert-top").show();$(".alert-top > button").data("name",a);$(".alert-top > .top-text").html(b)}}},variable:""};$("#go_top").click(function(){$("body,html").animate({scrollTop:0},500)});$("input, textarea").placeholder();$(document).ready(function(){Token.progress.start();var a=Token.detect.getIEVer();if(Token.detect.isIE()&&a<10){Token.message.topbar("iever","检测到正在使用 Internet Explorer "+a+"。为了更好地浏览本网站，请将浏览器升级到更高版本或更换为其它浏览器。")}$(".alert-top > button").click(function(){var b=$(this).data("name");if(b!=""){Token.storage.set("top_"+b,true)}$(".alert-top").slideUp("fast")})});$(window).load(function(){Token.progress.complete()});$(document).ajaxSend(function(){Token.progress.start()});$(document).ajaxComplete(function(){Token.progress.complete()});